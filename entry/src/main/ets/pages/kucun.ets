import router from '@ohos.router';

@Entry
@Component
struct ruku {
  @State activeTab: number = 0; // ç”¨äºè·Ÿè¸ªå½“å‰æ¿€æ´»çš„é€‰é¡¹å¡ç´¢å¼•
  @State message: string = '~æš‚æ— ç›¸å…³æ•°æ®~'; // æ˜¾ç¤ºçš„æ¶ˆæ¯
  @State showSupplierPopup: boolean = false; // æ§åˆ¶ä¾›åº”å•†é€‰æ‹©æ¡†æ˜¾ç¤º
  @State showDatePopup: boolean = false; // æ§åˆ¶æ—¥æœŸé€‰æ‹©æ¡†æ˜¾ç¤º
  private options: SelectOption[] = [
    { value: 'é€‰æ‹©ä¾›åº”å•†' },
    { value: 'å°æ¨è‚‰é£Ÿåº—' },
    { value: 'è¯šä¿¡è”¬èœæ‰¹å‘é—¨å¸‚' },
    { value: 'å½¦çº¢ç²®æ²¹æœ‰é™å…¬å¸' }
  ]
  @State selectedValue: string = 'é€‰æ‹©éœ€æ±‚å•ä½'; // å­˜å‚¨é€‰ä¸­å€¼
  private selectedDate: Date = new Date('2025-05-06');
  @State timetext: string = 'é€‰æ‹©ä¾›åº”æ—¥æœŸ     ';
  @State currentTabContent: string = 'å¾…æ”¶è´§'; // æ–°å¢çŠ¶æ€å˜é‡ï¼Œç”¨äºæ§åˆ¶æ˜¾ç¤ºçš„å†…å®¹

  build() {
    Column() {
      Row() {
        Text('<')
          .alignSelf(ItemAlign.Start) // ä¿æŒåœ¨è¡Œçš„æœ€å·¦ä¾§
          .fontSize(30)
          .margin({ top: 0, bottom: 10, right: 130})
          .onClick(() => {
            router.back()
          });

        Text('å®æ—¶åº“å­˜')
          .fontWeight(FontWeight.Bold)
          .alignSelf(ItemAlign.Center) // å±…ä¸­æ˜¾ç¤º
          .margin({ top: 0, bottom: 10 });
      }
      .width('100%') // ç¡®ä¿ Row å æ®å…¨éƒ¨å®½åº¦

      // ç¬¬äºŒå—ï¼šé€‰é¡¹å¡
      Row() {
        Text('å¾…æ”¶è´§')
          .fontSize(12)
          .fontWeight(this.activeTab === 0 ? FontWeight.Bold : FontWeight.Normal)
          .width('20%')
          .maxLines(1)
          .alignSelf(ItemAlign.Center)
          .textAlign(TextAlign.Center)
          .onClick(() => {
            this.currentTabContent = 'å¾…æ”¶è´§';
            this.activeTab = 0;
          });

        Text('æœªé…é€')
          .fontSize(12)
          .fontWeight(this.activeTab === 1 ? FontWeight.Bold : FontWeight.Normal)
          .width('20%')
          .maxLines(1)
          .alignSelf(ItemAlign.Center)
          .textAlign(TextAlign.Center)
          .onClick(() => {
            this.currentTabContent = 'æœªé…é€';
            this.activeTab = 1;
          });

        Text('å·²æ”¶è´§')
          .fontSize(12)
          .fontWeight(this.activeTab === 2 ? FontWeight.Bold : FontWeight.Normal)
          .width('20%')
          .maxLines(1)
          .alignSelf(ItemAlign.Center)
          .textAlign(TextAlign.Center)
          .onClick(() => {
            this.currentTabContent = 'å·²æ”¶è´§';
            this.activeTab = 2;
          });

        Text('å·²æ‹’æ”¶')
          .fontSize(12)
          .fontWeight(this.activeTab === 3 ? FontWeight.Bold : FontWeight.Normal)
          .width('20%')
          .maxLines(1)
          .alignSelf(ItemAlign.Center)
          .textAlign(TextAlign.Center)
          .onClick(() => {
            this.currentTabContent = 'å·²æ‹’æ”¶';
            this.activeTab = 3;
          });

        Text('å·²å–æ¶ˆ')
          .fontSize(12)
          .fontWeight(this.activeTab === 4 ? FontWeight.Bold : FontWeight.Normal)
          .width('20%')
          .maxLines(1)
          .alignSelf(ItemAlign.Center)
          .textAlign(TextAlign.Center)
          .onClick(() => {
            this.currentTabContent = 'å·²å–æ¶ˆ';
            this.activeTab = 4;
          });
      }
      .width('100%')
      .margin({ left: 10, right: 10 })
      .margin({ bottom: 20 });

      // ç¬¬ä¸‰å—ï¼šé€‰æ‹©ä¾›åº”å•†å’Œä¾›åº”æ—¥æœŸ
      Row() {
        Select(this.options)
          .selected(0)
          .value(this.selectedValue)
          .onSelect((index: number, value: string) => {
            this.selectedValue = value;
          })
          .alignSelf(ItemAlign.Start)
          .width("50%")
          .fontColor('#333')
          .backgroundColor('#FFF')
          .borderRadius(8)
          .border({ width: 0, color: '#DDD' });

        Row() {
          Text(this.timetext)
            .alignSelf(ItemAlign.End)
            .textAlign(TextAlign.End)
            .onClick(() => {
              DatePickerDialog.show({
                start: new Date("2000-1-1"),
                end: new Date("2100-12-31"),
                selected: this.selectedDate,
                onAccept: (value: DatePickerResult) => {
                  if (value.year !== undefined && value.month !== undefined && value.day !== undefined) {
                    this.selectedDate.setFullYear(value.year, value.month, value.day);
                    const formattedDate = `${value.year.toString().padStart(4, '0')}-${(value.month + 1).toString().padStart(2, '0')}-${value.day.toString().padStart(2, '0')}`;
                    this.timetext = formattedDate;
                  } else {
                    console.error('DatePickerResult ä¸­çš„å¹´ã€æœˆæˆ–æ—¥å±æ€§æœªå®šä¹‰');
                  }
                },
                onCancel: () => {
                  console.info("DatePickerDialog:onCancel()");
                },
                onChange: (value: DatePickerResult) => {
                  if (value.year !== undefined && value.month !== undefined && value.day !== undefined) {
                    console.info("DatePickerDialog:onChange()" + JSON.stringify(value));
                  } else {
                    console.error('DatePickerResult ä¸­çš„å¹´ã€æœˆæˆ–æ—¥å±æ€§æœªå®šä¹‰');
                  }
                }
              });
            })
            .width('50%')
            .fontWeight(1);
        }
      }
      .width('100%')
      .margin({ bottom: 20 });

      // æ ¹æ® currentTabContent æ˜¾ç¤ºå¯¹åº”çš„ Columnï¼Œå¹¶æ”¯æŒæ»šåŠ¨
      if (this.currentTabContent === 'å¾…æ”¶è´§') {
        Scroll() {
          Column() {
            Stack() {
              Column() {
                Row() {
                  Text('è¯šä¿¡è”¬èœæ‰¹å‘é—¨å¸‚')
                    .fontSize(20)
                    .fontWeight(FontWeight.Bold)
                    .fontColor('#333')
                  Blank()
                  Text('è®¢å•ä¿¡æ¯äºŒç»´ç  >')
                    .fontSize(14)
                    .fontColor('#1BBE6C')
                }
                .width('100%')
                .padding({ bottom: 8 })

                Text('ä¸‹å•æ—¶é—´ï¼š2025-05-07 15:08:45')
                  .fontSize(14)
                  .fontColor('#666')
                  .margin({ top: 4 })
                Text('ä¾›åº”æ—¶é—´ï¼š2025-05-21 ä¸Šåˆ')
                  .fontSize(14)
                  .fontColor('#666')
                  .margin({ top: 4 })
                Text('éœ€æ±‚å•ä½ï¼šå®è®­ç¬¬ä¸€å­¦æ ¡(åº“æˆ¿)')
                  .fontSize(14)
                  .fontColor('#666')
                  .margin({ top: 4 })
                Text('å•æ®å·ï¼šRK20250507001')
                  .fontSize(14)
                  .fontColor('#666')
                  .margin({ top: 4 })
                Text('å…¥åº“ç±»å‹ï¼šå­¦ç”Ÿé¤')
                  .fontSize(14)
                  .fontColor('#666')
                  .margin({ top: 4 })
                Text('ç”¨é¤ç±»å‹ï¼šè¥å…»é¤')
                  .fontSize(14)
                  .fontColor('#666')
                  .margin({ top: 4 })
                Text('é¤åˆ«ï¼šå…¶ä»–')
                  .fontSize(14)
                  .fontColor('#666')
                  .margin({ top: 4 })
                Text('ä¾›åº”å•†è”ç³»äººï¼šæè¯šä¿¡')
                  .fontSize(14)
                  .fontColor('#666')
                  .margin({ top: 4 })
                Row() {
                  Text('ä¾›åº”å•†ç”µè¯ï¼š18991274263')
                    .fontSize(14)
                    .fontColor('#666')
                  Text('ğŸ“')
                    .fontSize(16)
                    .fontColor('#1BBE6C')
                    .margin({ left: 4 })
                }
                .margin({ top: 4 })
                Text('æ‘˜è¦ï¼šæ— ')
                  .fontSize(14)
                  .fontColor('#666')
                  .margin({ top: 4 })

                Row() {
                  Text('â†’')
                    .fontSize(24)
                    .fontColor('#1BBE6C')
                    .backgroundColor('#E8F7F0')
                    .width(40)
                    .height(40)
                    .textAlign(TextAlign.Center)
                    .borderRadius(20)
                    .onClick(() => {
                      router.pushUrl({
                        url: 'pages/rukuyanshou',
                        params: {
                          orderId: 'RK20250507001'
                        }
                      })
                    })
                }
                .width('100%')
                .justifyContent(FlexAlign.End)
                .margin({ top: 12 })
              }
              .padding(16)
              .backgroundColor('#F8FFFA')
              .borderRadius(12)
              .border({ width: 1, color: '#1BBE6C' })
              .margin({ left: 16, right: 16, top: 16, bottom: 16 })
            }
          }
          .width('100%')
          .height('100%')
        }
      } else if (this.currentTabContent === 'æœªé…é€') {
        Scroll() {
          Column() {
            Text('~æš‚æ— ç›¸å…³æ•°æ®~')
              .fontSize(16)
              .fontWeight(FontWeight.Normal)
              .alignSelf(ItemAlign.Center);
          }
          .backgroundColor(0xCCCCCC)
          .width('100%')
          .height('100%')
          .justifyContent(FlexAlign.Center)
          .alignItems(HorizontalAlign.Center);
        }
      } else if (this.currentTabContent === 'å·²æ”¶è´§') {
        Scroll() {
          Column() {
            Text('~æš‚æ— ç›¸å…³æ•°æ®~')
              .fontSize(16)
              .fontWeight(FontWeight.Normal)
              .alignSelf(ItemAlign.Center);
          }
          .backgroundColor(0xCCCCCC)
          .width('100%')
          .height('100%')
          .justifyContent(FlexAlign.Center)
          .alignItems(HorizontalAlign.Center);
        }
      } else if (this.currentTabContent === 'å·²æ‹’æ”¶') {
        Scroll() {
          Column() {
            Text('~æš‚æ— ç›¸å…³æ•°æ®~')
              .fontSize(16)
              .fontWeight(FontWeight.Normal)
              .alignSelf(ItemAlign.Center);
          }
          .backgroundColor(0xCCCCCC)
          .width('100%')
          .height('100%')
          .justifyContent(FlexAlign.Center)
          .alignItems(HorizontalAlign.Center);
        }
      } else if (this.currentTabContent === 'å·²å–æ¶ˆ') {
        Scroll() {
          Column() {
            Text('~æš‚æ— ç›¸å…³æ•°æ®~')
              .fontSize(16)
              .fontWeight(FontWeight.Normal)
              .alignSelf(ItemAlign.Center);
          }
          .backgroundColor(0xCCCCCC)
          .width('100%')
          .height('100%')
          .justifyContent(FlexAlign.Center)
          .alignItems(HorizontalAlign.Center);
        }
      }
    }
    .height('100%')
    .width('100%')
    .backgroundColor(Color.White);
  }
}
